"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/incidents";
exports.ids = ["pages/api/incidents"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cincidents%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cincidents%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\incidents\\index.ts */ \"(api)/./src/pages/api/incidents/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/incidents\",\n        pathname: \"/api/incidents\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmluY2lkZW50cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyU1Q3BhZ2VzJTVDYXBpJTVDaW5jaWRlbnRzJTVDaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUU7QUFDbkU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDhEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw4REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFuc3BvcnQtaW5jaWRlbnQtcmVwb3J0ZXIvP2M3ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyY1xcXFxwYWdlc1xcXFxhcGlcXFxcaW5jaWRlbnRzXFxcXGluZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvaW5jaWRlbnRzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvaW5jaWRlbnRzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cincidents%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function hashPassword(password) {\n    const hashedPassword = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_0__.hash)(password, 12);\n    return hashedPassword;\n}\nasync function verifyPassword(password, hashedPassword) {\n    const isValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_0__.compare)(password, hashedPassword);\n    return isValid;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5QztBQUVsQyxlQUFlRSxhQUFhQyxRQUFnQjtJQUNqRCxNQUFNQyxpQkFBaUIsTUFBTUosOENBQUlBLENBQUNHLFVBQVU7SUFDNUMsT0FBT0M7QUFDVDtBQUVPLGVBQWVDLGVBQWVGLFFBQWdCLEVBQUVDLGNBQXNCO0lBQzNFLE1BQU1FLFVBQVUsTUFBTUwsaURBQU9BLENBQUNFLFVBQVVDO0lBQ3hDLE9BQU9FO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFuc3BvcnQtaW5jaWRlbnQtcmVwb3J0ZXIvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoYXNoLCBjb21wYXJlIH0gZnJvbSAnYmNyeXB0anMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBoYXNoKHBhc3N3b3JkLCAxMik7XG4gIHJldHVybiBoYXNoZWRQYXNzd29yZDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2hlZFBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbiAgcmV0dXJuIGlzVmFsaWQ7XG59XG4iXSwibmFtZXMiOlsiaGFzaCIsImNvbXBhcmUiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwidmVyaWZ5UGFzc3dvcmQiLCJpc1ZhbGlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(api)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nif (!process.env.MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nconst uri = process.env.MONGODB_URI;\nlet client;\nlet clientPromise;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    let globalWithMongo = global;\n    if (!globalWithMongo._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri);\n        globalWithMongo._mongoClientPromise = client.connect();\n    }\n    clientPromise = globalWithMongo._mongoClientPromise;\n} else {}\nasync function connectToDatabase() {\n    const client = await clientPromise;\n    const db = client.db();\n    return {\n        client,\n        db\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzQztBQUV0QyxJQUFJLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVyxFQUFFO0lBQzVCLE1BQU0sSUFBSUMsTUFBTTtBQUNsQjtBQUVBLE1BQU1DLE1BQU1KLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVztBQUNuQyxJQUFJRztBQUNKLElBQUlDO0FBRUosSUFBSU4sSUFBeUIsRUFBZTtJQUMxQywrREFBK0Q7SUFDL0QsNkVBQTZFO0lBQzdFLElBQUlPLGtCQUFrQkM7SUFJdEIsSUFBSSxDQUFDRCxnQkFBZ0JFLG1CQUFtQixFQUFFO1FBQ3hDSixTQUFTLElBQUlOLGdEQUFXQSxDQUFDSztRQUN6QkcsZ0JBQWdCRSxtQkFBbUIsR0FBR0osT0FBT0ssT0FBTztJQUN0RDtJQUNBSixnQkFBZ0JDLGdCQUFnQkUsbUJBQW1CO0FBQ3JELE9BQU8sRUFJTjtBQUVNLGVBQWVFO0lBQ3BCLE1BQU1OLFNBQVMsTUFBTUM7SUFDckIsTUFBTU0sS0FBS1AsT0FBT08sRUFBRTtJQUNwQixPQUFPO1FBQUVQO1FBQVFPO0lBQUc7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFuc3BvcnQtaW5jaWRlbnQtcmVwb3J0ZXIvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcblxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJyk7XG59XG5cbmNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xubGV0IGNsaWVudDogTW9uZ29DbGllbnQ7XG5sZXQgY2xpZW50UHJvbWlzZTogUHJvbWlzZTxNb25nb0NsaWVudD47XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcbiAgLy8gaXMgcHJlc2VydmVkIGFjcm9zcyBtb2R1bGUgcmVsb2FkcyBjYXVzZWQgYnkgSE1SIChIb3QgTW9kdWxlIFJlcGxhY2VtZW50KS5cbiAgbGV0IGdsb2JhbFdpdGhNb25nbyA9IGdsb2JhbCBhcyB0eXBlb2YgZ2xvYmFsVGhpcyAmIHtcbiAgICBfbW9uZ29DbGllbnRQcm9taXNlPzogUHJvbWlzZTxNb25nb0NsaWVudD47XG4gIH07XG5cbiAgaWYgKCFnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSkge1xuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmkpO1xuICAgIGdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcbiAgfVxuICBjbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2U7XG59IGVsc2Uge1xuICAvLyBJbiBwcm9kdWN0aW9uIG1vZGUsIGl0J3MgYmVzdCB0byBub3QgdXNlIGEgZ2xvYmFsIHZhcmlhYmxlLlxuICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpKTtcbiAgY2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0VG9EYXRhYmFzZSgpIHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcbiAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcbiAgcmV0dXJuIHsgY2xpZW50LCBkYiB9O1xufVxuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiRXJyb3IiLCJ1cmkiLCJjbGllbnQiLCJjbGllbnRQcm9taXNlIiwiZ2xvYmFsV2l0aE1vbmdvIiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsImNvbm5lY3QiLCJjb25uZWN0VG9EYXRhYmFzZSIsImRiIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/db.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/[...nextauth].ts":
/*!*********************************************!*\
  !*** ./src/pages/api/auth/[...nextauth].ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/auth */ \"(api)/./src/lib/auth.ts\");\n\n\n\n\nconst authOptions = {\n    providers: [\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default()({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    const { db } = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.connectToDatabase)();\n                    const user = await db.collection(\"users\").findOne({\n                        email: credentials.email.toLowerCase()\n                    });\n                    if (!user) {\n                        throw new Error(\"No user found with this email\");\n                    }\n                    const isValid = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.verifyPassword)(credentials.password, user.password);\n                    if (!isValid) {\n                        throw new Error(\"Invalid password\");\n                    }\n                    return {\n                        id: user._id.toString(),\n                        email: user.email,\n                        name: user.name,\n                        userType: user.userType\n                    };\n                } catch (error) {\n                    console.error(\"Authentication error:\", error);\n                    throw error;\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.userType = user.userType;\n                token.name = user.name;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.userType = token.userType;\n                session.user.name = token.name;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/signin\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRDtBQUNZO0FBQ2Q7QUFDRDtBQUU1QyxNQUFNSSxjQUErQjtJQUMxQ0MsV0FBVztRQUNUSixzRUFBbUJBLENBQUM7WUFDbEJLLE1BQU07WUFDTkMsYUFBYTtnQkFDWEMsT0FBTztvQkFBRUMsT0FBTztvQkFBU0MsTUFBTTtnQkFBUTtnQkFDdkNDLFVBQVU7b0JBQUVGLE9BQU87b0JBQVlDLE1BQU07Z0JBQVc7WUFDbEQ7WUFDQSxNQUFNRSxXQUFVTCxXQUFXO2dCQUN6QixJQUFJO29CQUNGLE1BQU0sRUFBRU0sRUFBRSxFQUFFLEdBQUcsTUFBTVgsMERBQWlCQTtvQkFFdEMsTUFBTVksT0FBTyxNQUFNRCxHQUFHRSxVQUFVLENBQUMsU0FBU0MsT0FBTyxDQUFDO3dCQUNoRFIsT0FBT0QsWUFBWUMsS0FBSyxDQUFDUyxXQUFXO29CQUN0QztvQkFFQSxJQUFJLENBQUNILE1BQU07d0JBQ1QsTUFBTSxJQUFJSSxNQUFNO29CQUNsQjtvQkFFQSxNQUFNQyxVQUFVLE1BQU1oQix5REFBY0EsQ0FDbENJLFlBQVlJLFFBQVEsRUFDcEJHLEtBQUtILFFBQVE7b0JBR2YsSUFBSSxDQUFDUSxTQUFTO3dCQUNaLE1BQU0sSUFBSUQsTUFBTTtvQkFDbEI7b0JBRUEsT0FBTzt3QkFDTEUsSUFBSU4sS0FBS08sR0FBRyxDQUFDQyxRQUFRO3dCQUNyQmQsT0FBT00sS0FBS04sS0FBSzt3QkFDakJGLE1BQU1RLEtBQUtSLElBQUk7d0JBQ2ZpQixVQUFVVCxLQUFLUyxRQUFRO29CQUN6QjtnQkFDRixFQUFFLE9BQU9DLE9BQU87b0JBQ2RDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBO29CQUN2QyxNQUFNQTtnQkFDUjtZQUNGO1FBQ0Y7S0FDRDtJQUNERSxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVkLElBQUksRUFBRTtZQUN2QixJQUFJQSxNQUFNO2dCQUNSYyxNQUFNTCxRQUFRLEdBQUdULEtBQUtTLFFBQVE7Z0JBQzlCSyxNQUFNdEIsSUFBSSxHQUFHUSxLQUFLUixJQUFJO1lBQ3hCO1lBQ0EsT0FBT3NCO1FBQ1Q7UUFDQSxNQUFNQyxTQUFRLEVBQUVBLE9BQU8sRUFBRUQsS0FBSyxFQUFFO1lBQzlCLElBQUlBLE9BQU87Z0JBQ1RDLFFBQVFmLElBQUksQ0FBQ1MsUUFBUSxHQUFHSyxNQUFNTCxRQUFRO2dCQUN0Q00sUUFBUWYsSUFBSSxDQUFDUixJQUFJLEdBQUdzQixNQUFNdEIsSUFBSTtZQUNoQztZQUNBLE9BQU91QjtRQUNUO0lBQ0Y7SUFDQUMsT0FBTztRQUNMQyxRQUFRO1FBQ1JQLE9BQU87SUFDVDtJQUNBSyxTQUFTO1FBQ1BHLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztJQUN6QjtJQUNBQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7QUFDckMsRUFBRTtBQUVGLGlFQUFlckMsZ0RBQVFBLENBQUNJLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFuc3BvcnQtaW5jaWRlbnQtcmVwb3J0ZXIvLi9zcmMvcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50cz81MGExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOZXh0QXV0aCwgeyBOZXh0QXV0aE9wdGlvbnMgfSBmcm9tICduZXh0LWF1dGgnO1xuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscyc7XG5pbXBvcnQgeyBjb25uZWN0VG9EYXRhYmFzZSB9IGZyb20gJy4uLy4uLy4uL2xpYi9kYic7XG5pbXBvcnQgeyB2ZXJpZnlQYXNzd29yZCB9IGZyb20gJy4uLy4uLy4uL2xpYi9hdXRoJztcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogJ0NyZWRlbnRpYWxzJyxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiBcIkVtYWlsXCIsIHR5cGU6IFwiZW1haWxcIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgZGIgfSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZmluZE9uZSh7XG4gICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGZvdW5kIHdpdGggdGhpcyBlbWFpbCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxuICAgICAgICAgICAgdXNlci5wYXNzd29yZFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwYXNzd29yZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5faWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgdXNlclR5cGU6IHVzZXIudXNlclR5cGUsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRoZW50aWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSksXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLnVzZXJUeXBlID0gdXNlci51c2VyVHlwZTtcbiAgICAgICAgdG9rZW4ubmFtZSA9IHVzZXIubmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyLnVzZXJUeXBlID0gdG9rZW4udXNlclR5cGU7XG4gICAgICAgIHNlc3Npb24udXNlci5uYW1lID0gdG9rZW4ubmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcbiAgICBlcnJvcjogJy9hdXRoL3NpZ25pbicsXG4gIH0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogJ2p3dCcsXG4gICAgbWF4QWdlOiAzMCAqIDI0ICogNjAgKiA2MCwgLy8gMzAgZGF5c1xuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKGF1dGhPcHRpb25zKTtcbiJdLCJuYW1lcyI6WyJOZXh0QXV0aCIsIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJjb25uZWN0VG9EYXRhYmFzZSIsInZlcmlmeVBhc3N3b3JkIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiZGIiLCJ1c2VyIiwiY29sbGVjdGlvbiIsImZpbmRPbmUiLCJ0b0xvd2VyQ2FzZSIsIkVycm9yIiwiaXNWYWxpZCIsImlkIiwiX2lkIiwidG9TdHJpbmciLCJ1c2VyVHlwZSIsImVycm9yIiwiY29uc29sZSIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwic2Vzc2lvbiIsInBhZ2VzIiwic2lnbkluIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/incidents/index.ts":
/*!******************************************!*\
  !*** ./src/pages/api/incidents/index.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth/[...nextauth] */ \"(api)/./src/pages/api/auth/[...nextauth].ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_6__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_4__]);\nformidable__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nconst uploadDir = path__WEBPACK_IMPORTED_MODULE_6___default().join(process.cwd(), \"public\", \"uploads\");\n// Ensure upload directory exists\nif (!fs__WEBPACK_IMPORTED_MODULE_5___default().existsSync(uploadDir)) {\n    fs__WEBPACK_IMPORTED_MODULE_5___default().mkdirSync(uploadDir, {\n        recursive: true\n    });\n}\nasync function handler(req, res) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.authOptions);\n        if (!session) {\n            return res.status(401).json({\n                message: \"Not authenticated\"\n            });\n        }\n        const { db } = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.connectToDatabase)();\n        // GET request to fetch all incidents\n        if (req.method === \"GET\") {\n            try {\n                const page = parseInt(req.query.page) || 1;\n                const limit = parseInt(req.query.limit) || 10;\n                const search = req.query.search;\n                const skip = (page - 1) * limit;\n                let query = {};\n                if (search) {\n                    query = {\n                        $or: [\n                            {\n                                title: {\n                                    $regex: search,\n                                    $options: \"i\"\n                                }\n                            },\n                            {\n                                \"location.address\": {\n                                    $regex: search,\n                                    $options: \"i\"\n                                }\n                            },\n                            {\n                                type: {\n                                    $regex: search,\n                                    $options: \"i\"\n                                }\n                            },\n                            {\n                                description: {\n                                    $regex: search,\n                                    $options: \"i\"\n                                }\n                            }\n                        ]\n                    };\n                }\n                const [rawIncidents, total] = await Promise.all([\n                    db.collection(\"incidents\").find(query).sort({\n                        createdAt: -1\n                    }).skip(skip).limit(limit).toArray(),\n                    db.collection(\"incidents\").countDocuments(query)\n                ]);\n                // Ensure all incidents have the required fields with proper types\n                const incidents = rawIncidents.map((incident)=>({\n                        _id: incident._id,\n                        title: String(incident.title || \"\"),\n                        location: {\n                            address: String(incident.location?.address || \"\")\n                        },\n                        type: String(incident.type || \"\"),\n                        severity: String(incident.severity || \"\"),\n                        status: String(incident.status || \"pending\"),\n                        description: String(incident.description || \"\"),\n                        photoUrl: incident.photoUrl || null,\n                        reportedBy: {\n                            name: String(incident.reportedBy?.name || \"\"),\n                            email: String(incident.reportedBy?.email || \"\")\n                        },\n                        createdAt: incident.createdAt ? new Date(incident.createdAt).toISOString() : new Date().toISOString(),\n                        comments: Array.isArray(incident.comments) ? incident.comments : []\n                    }));\n                return res.status(200).json({\n                    incidents,\n                    total,\n                    page,\n                    totalPages: Math.ceil(total / limit)\n                });\n            } catch (error) {\n                console.error(\"Error fetching incidents:\", error);\n                return res.status(500).json({\n                    message: \"Error fetching incidents\",\n                    error: error.message\n                });\n            }\n        }\n        // POST request to create a new incident\n        if (req.method === \"POST\") {\n            try {\n                const form = (0,formidable__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n                    uploadDir,\n                    keepExtensions: true,\n                    maxFileSize: 5 * 1024 * 1024\n                });\n                const [fields, files] = await new Promise((resolve, reject)=>{\n                    form.parse(req, (err, fields, files)=>{\n                        if (err) reject(err);\n                        resolve([\n                            fields,\n                            files\n                        ]);\n                    });\n                });\n                // Validate required fields\n                if (!fields.title || !fields.location || !fields.type || !fields.severity) {\n                    return res.status(400).json({\n                        message: \"Missing required fields\",\n                        receivedData: {\n                            title: fields.title,\n                            location: fields.location,\n                            type: fields.type,\n                            severity: fields.severity\n                        }\n                    });\n                }\n                // Get user details from the database\n                const user = await db.collection(\"users\").findOne({\n                    email: session.user.email\n                });\n                if (!user) {\n                    return res.status(404).json({\n                        message: \"User not found\"\n                    });\n                }\n                let photoUrl = null;\n                if (files.photo) {\n                    const file = Array.isArray(files.photo) ? files.photo[0] : files.photo;\n                    const fileName = path__WEBPACK_IMPORTED_MODULE_6___default().basename(file.filepath);\n                    photoUrl = `/uploads/${fileName}`;\n                }\n                const incident = {\n                    title: fields.title,\n                    location: {\n                        address: fields.location,\n                        coordinates: null\n                    },\n                    type: fields.type,\n                    severity: fields.severity,\n                    description: fields.description || \"\",\n                    photoUrl,\n                    status: \"pending\",\n                    reportedBy: {\n                        _id: user._id,\n                        name: user.name,\n                        email: user.email\n                    },\n                    comments: [],\n                    createdAt: new Date(),\n                    updatedAt: new Date()\n                };\n                const result = await db.collection(\"incidents\").insertOne(incident);\n                return res.status(201).json({\n                    message: \"Incident created successfully\",\n                    incident: {\n                        ...incident,\n                        _id: result.insertedId\n                    }\n                });\n            } catch (error) {\n                console.error(\"Error creating incident:\", error);\n                return res.status(500).json({\n                    message: \"Could not create incident\",\n                    error: error.message\n                });\n            }\n        }\n        // PATCH request to update incident status\n        if (req.method === \"PATCH\") {\n            try {\n                // Only officials can update status\n                if (session.user.userType !== \"official\") {\n                    return res.status(403).json({\n                        message: \"Not authorized to update incident status\"\n                    });\n                }\n                const { id, status } = req.body;\n                if (!id || !status) {\n                    return res.status(400).json({\n                        message: \"Incident ID and status are required\"\n                    });\n                }\n                const validStatuses = [\n                    \"pending\",\n                    \"in_progress\",\n                    \"resolved\",\n                    \"rejected\"\n                ];\n                if (!validStatuses.includes(status)) {\n                    return res.status(400).json({\n                        message: \"Invalid status value\"\n                    });\n                }\n                const result = await db.collection(\"incidents\").updateOne({\n                    _id: new mongodb__WEBPACK_IMPORTED_MODULE_3__.ObjectId(id)\n                }, {\n                    $set: {\n                        status,\n                        updatedAt: new Date(),\n                        updatedBy: {\n                            email: session.user.email,\n                            name: session.user.name\n                        }\n                    }\n                });\n                if (result.matchedCount === 0) {\n                    return res.status(404).json({\n                        message: \"Incident not found\"\n                    });\n                }\n                return res.status(200).json({\n                    message: \"Incident status updated successfully\"\n                });\n            } catch (error) {\n                console.error(\"Error updating incident status:\", error);\n                return res.status(500).json({\n                    message: \"Error updating incident status\",\n                    error: error.message\n                });\n            }\n        }\n        // DELETE request to remove an incident\n        if (req.method === \"DELETE\") {\n            try {\n                const { id } = req.query;\n                if (!id) {\n                    return res.status(400).json({\n                        message: \"Incident ID is required\"\n                    });\n                }\n                // Get the incident to check permissions\n                const incident = await db.collection(\"incidents\").findOne({\n                    _id: new mongodb__WEBPACK_IMPORTED_MODULE_3__.ObjectId(id)\n                });\n                if (!incident) {\n                    return res.status(404).json({\n                        message: \"Incident not found\"\n                    });\n                }\n                // Allow deletion if user is the owner or an official\n                if (incident.reportedBy.email !== session.user.email && session.user.userType !== \"official\") {\n                    return res.status(403).json({\n                        message: \"Not authorized to delete this incident\"\n                    });\n                }\n                // Delete the incident\n                await db.collection(\"incidents\").deleteOne({\n                    _id: new mongodb__WEBPACK_IMPORTED_MODULE_3__.ObjectId(id)\n                });\n                return res.status(200).json({\n                    message: \"Incident deleted successfully\"\n                });\n            } catch (error) {\n                console.error(\"Error deleting incident:\", error);\n                return res.status(500).json({\n                    message: \"Error deleting incident\",\n                    error: error.message\n                });\n            }\n        }\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    } catch (error) {\n        console.error(\"Top level error:\", error);\n        return res.status(500).json({\n            message: \"Server error\",\n            error: error.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2luY2lkZW50cy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQzZDO0FBQ087QUFDQTtBQUNqQjtBQUNDO0FBQ2hCO0FBQ0k7QUFFakIsTUFBTU8sU0FBUztJQUNwQkMsS0FBSztRQUNIQyxZQUFZO0lBQ2Q7QUFDRixFQUFFO0FBRUYsTUFBTUMsWUFBWUosZ0RBQVMsQ0FBQ00sUUFBUUMsR0FBRyxJQUFJLFVBQVU7QUFDckQsaUNBQWlDO0FBQ2pDLElBQUksQ0FBQ1Isb0RBQWEsQ0FBQ0ssWUFBWTtJQUM3QkwsbURBQVksQ0FBQ0ssV0FBVztRQUFFTSxXQUFXO0lBQUs7QUFDNUM7QUFFZSxlQUFlQyxRQUM1QkMsR0FBbUIsRUFDbkJDLEdBQW9CO0lBRXBCLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU1wQiwyREFBZ0JBLENBQUNrQixLQUFLQyxLQUFLbEIsd0RBQVdBO1FBRTVELElBQUksQ0FBQ21CLFNBQVM7WUFDWixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQW9CO1FBQzdEO1FBRUEsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBRyxNQUFNdEIsMERBQWlCQTtRQUV0QyxxQ0FBcUM7UUFDckMsSUFBSWdCLElBQUlPLE1BQU0sS0FBSyxPQUFPO1lBQ3hCLElBQUk7Z0JBQ0YsTUFBTUMsT0FBT0MsU0FBU1QsSUFBSVUsS0FBSyxDQUFDRixJQUFJLEtBQWU7Z0JBQ25ELE1BQU1HLFFBQVFGLFNBQVNULElBQUlVLEtBQUssQ0FBQ0MsS0FBSyxLQUFlO2dCQUNyRCxNQUFNQyxTQUFTWixJQUFJVSxLQUFLLENBQUNFLE1BQU07Z0JBQy9CLE1BQU1DLE9BQU8sQ0FBQ0wsT0FBTyxLQUFLRztnQkFFMUIsSUFBSUQsUUFBUSxDQUFDO2dCQUNiLElBQUlFLFFBQVE7b0JBQ1ZGLFFBQVE7d0JBQ05JLEtBQUs7NEJBQ0g7Z0NBQUVDLE9BQU87b0NBQUVDLFFB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cGFjazovL3RyYW5zcG9ydC1pbmNpZGVudC1yZXBvcnRlci8uL3NyYy9wYWdlcy9hcGkvaW5jaWRlbnRzL2luZGV4LnRzP2FjNTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJy4uL2F1dGgvWy4uLm5leHRhdXRoXSc7XG5pbXBvcnQgeyBjb25uZWN0VG9EYXRhYmFzZSB9IGZyb20gJy4uLy4uLy4uL2xpYi9kYic7XG5pbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gJ21vbmdvZGInO1xuaW1wb3J0IGZvcm1pZGFibGUgZnJvbSAnZm9ybWlkYWJsZSc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGFwaToge1xuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxuICB9LFxufTtcblxuY29uc3QgdXBsb2FkRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAndXBsb2FkcycpO1xuLy8gRW5zdXJlIHVwbG9hZCBkaXJlY3RvcnkgZXhpc3RzXG5pZiAoIWZzLmV4aXN0c1N5bmModXBsb2FkRGlyKSkge1xuICBmcy5ta2RpclN5bmModXBsb2FkRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2Vcbikge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzLCBhdXRoT3B0aW9ucyk7XG5cbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdOb3QgYXV0aGVudGljYXRlZCcgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBkYiB9ID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcblxuICAgIC8vIEdFVCByZXF1ZXN0IHRvIGZldGNoIGFsbCBpbmNpZGVudHNcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChyZXEucXVlcnkucGFnZSBhcyBzdHJpbmcpIHx8IDE7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmxpbWl0IGFzIHN0cmluZykgfHwgMTA7XG4gICAgICAgIGNvbnN0IHNlYXJjaCA9IHJlcS5xdWVyeS5zZWFyY2ggYXMgc3RyaW5nO1xuICAgICAgICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gICAgICAgIGxldCBxdWVyeSA9IHt9O1xuICAgICAgICBpZiAoc2VhcmNoKSB7XG4gICAgICAgICAgcXVlcnkgPSB7XG4gICAgICAgICAgICAkb3I6IFtcbiAgICAgICAgICAgICAgeyB0aXRsZTogeyAkcmVnZXg6IHNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9IH0sXG4gICAgICAgICAgICAgIHsgJ2xvY2F0aW9uLmFkZHJlc3MnOiB7ICRyZWdleDogc2VhcmNoLCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgICAgICAgeyB0eXBlOiB7ICRyZWdleDogc2VhcmNoLCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogeyAkcmVnZXg6IHNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9IH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgW3Jhd0luY2lkZW50cywgdG90YWxdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ2luY2lkZW50cycpXG4gICAgICAgICAgICAuZmluZChxdWVyeSlcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxuICAgICAgICAgICAgLnNraXAoc2tpcClcbiAgICAgICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgICAgIC50b0FycmF5KCksXG4gICAgICAgICAgZGIuY29sbGVjdGlvbignaW5jaWRlbnRzJykuY291bnREb2N1bWVudHMocXVlcnkpXG4gICAgICAgIF0pO1xuXG4gICAgICAgIC8vIEVuc3VyZSBhbGwgaW5jaWRlbnRzIGhhdmUgdGhlIHJlcXVpcmVkIGZpZWxkcyB3aXRoIHByb3BlciB0eXBlc1xuICAgICAgICBjb25zdCBpbmNpZGVudHMgPSByYXdJbmNpZGVudHMubWFwKGluY2lkZW50ID0+ICh7XG4gICAgICAgICAgX2lkOiBpbmNpZGVudC5faWQsXG4gICAgICAgICAgdGl0bGU6IFN0cmluZyhpbmNpZGVudC50aXRsZSB8fCAnJyksXG4gICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgIGFkZHJlc3M6IFN0cmluZyhpbmNpZGVudC5sb2NhdGlvbj8uYWRkcmVzcyB8fCAnJylcbiAgICAgICAgICB9LFxuICAgICAgICAgIHR5cGU6IFN0cmluZyhpbmNpZGVudC50eXBlIHx8ICcnKSxcbiAgICAgICAgICBzZXZlcml0eTogU3RyaW5nKGluY2lkZW50LnNldmVyaXR5IHx8ICcnKSxcbiAgICAgICAgICBzdGF0dXM6IFN0cmluZyhpbmNpZGVudC5zdGF0dXMgfHwgJ3BlbmRpbmcnKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogU3RyaW5nKGluY2lkZW50LmRlc2NyaXB0aW9uIHx8ICcnKSxcbiAgICAgICAgICBwaG90b1VybDogaW5jaWRlbnQucGhvdG9VcmwgfHwgbnVsbCxcbiAgICAgICAgICByZXBvcnRlZEJ5OiB7XG4gICAgICAgICAgICBuYW1lOiBTdHJpbmcoaW5jaWRlbnQucmVwb3J0ZWRCeT8ubmFtZSB8fCAnJyksXG4gICAgICAgICAgICBlbWFpbDogU3RyaW5nKGluY2lkZW50LnJlcG9ydGVkQnk/LmVtYWlsIHx8ICcnKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY3JlYXRlZEF0OiBpbmNpZGVudC5jcmVhdGVkQXQgPyBuZXcgRGF0ZShpbmNpZGVudC5jcmVhdGVkQXQpLnRvSVNPU3RyaW5nKCkgOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgY29tbWVudHM6IEFycmF5LmlzQXJyYXkoaW5jaWRlbnQuY29tbWVudHMpID8gaW5jaWRlbnQuY29tbWVudHMgOiBbXVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICBpbmNpZGVudHMsXG4gICAgICAgICAgdG90YWwsXG4gICAgICAgICAgcGFnZSxcbiAgICAgICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdClcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBpbmNpZGVudHM6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBmZXRjaGluZyBpbmNpZGVudHMnLFxuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQT1NUIHJlcXVlc3QgdG8gY3JlYXRlIGEgbmV3IGluY2lkZW50XG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGZvcm1pZGFibGUoe1xuICAgICAgICAgIHVwbG9hZERpcixcbiAgICAgICAgICBrZWVwRXh0ZW5zaW9uczogdHJ1ZSxcbiAgICAgICAgICBtYXhGaWxlU2l6ZTogNSAqIDEwMjQgKiAxMDI0LCAvLyA1TUIgbGltaXRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgW2ZpZWxkcywgZmlsZXNdID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGZvcm0ucGFyc2UocmVxLCAoZXJyLCBmaWVsZHMsIGZpbGVzKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHJlc29sdmUoW2ZpZWxkcywgZmlsZXNdKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgIGlmICghZmllbGRzLnRpdGxlIHx8ICFmaWVsZHMubG9jYXRpb24gfHwgIWZpZWxkcy50eXBlIHx8ICFmaWVsZHMuc2V2ZXJpdHkpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzJyxcbiAgICAgICAgICAgIHJlY2VpdmVkRGF0YTogeyB0aXRsZTogZmllbGRzLnRpdGxlLCBsb2NhdGlvbjogZmllbGRzLmxvY2F0aW9uLCB0eXBlOiBmaWVsZHMudHlwZSwgc2V2ZXJpdHk6IGZpZWxkcy5zZXZlcml0eSB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgdXNlciBkZXRhaWxzIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoe1xuICAgICAgICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwaG90b1VybCA9IG51bGw7XG4gICAgICAgIGlmIChmaWxlcy5waG90bykge1xuICAgICAgICAgIGNvbnN0IGZpbGUgPSBBcnJheS5pc0FycmF5KGZpbGVzLnBob3RvKSA/IGZpbGVzLnBob3RvWzBdIDogZmlsZXMucGhvdG87XG4gICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBwYXRoLmJhc2VuYW1lKGZpbGUuZmlsZXBhdGgpO1xuICAgICAgICAgIHBob3RvVXJsID0gYC91cGxvYWRzLyR7ZmlsZU5hbWV9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGluY2lkZW50ID0ge1xuICAgICAgICAgIHRpdGxlOiBmaWVsZHMudGl0bGUsXG4gICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgIGFkZHJlc3M6IGZpZWxkcy5sb2NhdGlvbixcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBudWxsLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHlwZTogZmllbGRzLnR5cGUsXG4gICAgICAgICAgc2V2ZXJpdHk6IGZpZWxkcy5zZXZlcml0eSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZmllbGRzLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgIHBob3RvVXJsLFxuICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgIHJlcG9ydGVkQnk6IHtcbiAgICAgICAgICAgIF9pZDogdXNlci5faWQsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbW1lbnRzOiBbXSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2luY2lkZW50cycpLmluc2VydE9uZShpbmNpZGVudCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6ICdJbmNpZGVudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgaW5jaWRlbnQ6IHsgLi4uaW5jaWRlbnQsIF9pZDogcmVzdWx0Lmluc2VydGVkSWQgfSxcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBpbmNpZGVudDonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCBjcmVhdGUgaW5jaWRlbnQnLFxuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQQVRDSCByZXF1ZXN0IHRvIHVwZGF0ZSBpbmNpZGVudCBzdGF0dXNcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BBVENIJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gT25seSBvZmZpY2lhbHMgY2FuIHVwZGF0ZSBzdGF0dXNcbiAgICAgICAgaWYgKHNlc3Npb24udXNlci51c2VyVHlwZSAhPT0gJ29mZmljaWFsJykge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdOb3QgYXV0aG9yaXplZCB0byB1cGRhdGUgaW5jaWRlbnQgc3RhdHVzJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaWQsIHN0YXR1cyB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgaWYgKCFpZCB8fCAhc3RhdHVzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0luY2lkZW50IElEIGFuZCBzdGF0dXMgYXJlIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZhbGlkU3RhdHVzZXMgPSBbJ3BlbmRpbmcnLCAnaW5fcHJvZ3Jlc3MnLCAncmVzb2x2ZWQnLCAncmVqZWN0ZWQnXTtcbiAgICAgICAgaWYgKCF2YWxpZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBzdGF0dXMgdmFsdWUnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbignaW5jaWRlbnRzJykudXBkYXRlT25lKFxuICAgICAgICAgIHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgJHNldDoge1xuICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEJ5OiB7XG4gICAgICAgICAgICAgICAgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICBuYW1lOiBzZXNzaW9uLnVzZXIubmFtZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChyZXN1bHQubWF0Y2hlZENvdW50ID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0luY2lkZW50IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSW5jaWRlbnQgc3RhdHVzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGluY2lkZW50IHN0YXR1czonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHVwZGF0aW5nIGluY2lkZW50IHN0YXR1cycsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERFTEVURSByZXF1ZXN0IHRvIHJlbW92ZSBhbiBpbmNpZGVudFxuICAgIGlmIChyZXEubWV0aG9kID09PSAnREVMRVRFJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW5jaWRlbnQgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IHRoZSBpbmNpZGVudCB0byBjaGVjayBwZXJtaXNzaW9uc1xuICAgICAgICBjb25zdCBpbmNpZGVudCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2luY2lkZW50cycpLmZpbmRPbmUoe1xuICAgICAgICAgIF9pZDogbmV3IE9iamVjdElkKGlkIGFzIHN0cmluZyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaW5jaWRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnSW5jaWRlbnQgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFsbG93IGRlbGV0aW9uIGlmIHVzZXIgaXMgdGhlIG93bmVyIG9yIGFuIG9mZmljaWFsXG4gICAgICAgIGlmIChpbmNpZGVudC5yZXBvcnRlZEJ5LmVtYWlsICE9PSBzZXNzaW9uLnVzZXIuZW1haWwgJiYgc2Vzc2lvbi51c2VyLnVzZXJUeXBlICE9PSAnb2ZmaWNpYWwnKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ05vdCBhdXRob3JpemVkIHRvIGRlbGV0ZSB0aGlzIGluY2lkZW50JyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgaW5jaWRlbnRcbiAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbignaW5jaWRlbnRzJykuZGVsZXRlT25lKHtcbiAgICAgICAgICBfaWQ6IG5ldyBPYmplY3RJZChpZCBhcyBzdHJpbmcpLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSW5jaWRlbnQgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgaW5jaWRlbnQ6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBkZWxldGluZyBpbmNpZGVudCcsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1RvcCBsZXZlbCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdTZXJ2ZXIgZXJyb3InLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsImNvbm5lY3RUb0RhdGFiYXNlIiwiT2JqZWN0SWQiLCJmb3JtaWRhYmxlIiwiZnMiLCJwYXRoIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsInVwbG9hZERpciIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZXNzaW9uIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJkYiIsIm1ldGhvZCIsInBhZ2UiLCJwYXJzZUludCIsInF1ZXJ5IiwibGltaXQiLCJzZWFyY2giLCJza2lwIiwiJG9yIiwidGl0bGUiLCIkcmVnZXgiLCIkb3B0aW9ucyIsInR5cGUiLCJkZXNjcmlwdGlvbiIsInJhd0luY2lkZW50cyIsInRvdGFsIiwiUHJvbWlzZSIsImFsbCIsImNvbGxlY3Rpb24iLCJmaW5kIiwic29ydCIsImNyZWF0ZWRBdCIsInRvQXJyYXkiLCJjb3VudERvY3VtZW50cyIsImluY2lkZW50cyIsIm1hcCIsImluY2lkZW50IiwiX2lkIiwiU3RyaW5nIiwibG9jYXRpb24iLCJhZGRyZXNzIiwic2V2ZXJpdHkiLCJwaG90b1VybCIsInJlcG9ydGVkQnkiLCJuYW1lIiwiZW1haWwiLCJEYXRlIiwidG9JU09TdHJpbmciLCJjb21tZW50cyIsIkFycmF5IiwiaXNBcnJheSIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsImVycm9yIiwiY29uc29sZSIsImZvcm0iLCJrZWVwRXh0ZW5zaW9ucyIsIm1heEZpbGVTaXplIiwiZmllbGRzIiwiZmlsZXMiLCJyZXNvbHZlIiwicmVqZWN0IiwicGFyc2UiLCJlcnIiLCJyZWNlaXZlZERhdGEiLCJ1c2VyIiwiZmluZE9uZSIsInBob3RvIiwiZmlsZSIsImZpbGVOYW1lIiwiYmFzZW5hbWUiLCJmaWxlcGF0aCIsImNvb3JkaW5hdGVzIiwidXBkYXRlZEF0IiwicmVzdWx0IiwiaW5zZXJ0T25lIiwiaW5zZXJ0ZWRJZCIsInVzZXJUeXBlIiwiaWQiLCJib2R5IiwidmFsaWRTdGF0dXNlcyIsImluY2x1ZGVzIiwidXBkYXRlT25lIiwiJHNldCIsInVwZGF0ZWRCeSIsIm1hdGNoZWRDb3VudCIsImRlbGV0ZU9uZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/incidents/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cincidents%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();