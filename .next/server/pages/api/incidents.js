"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/incidents";
exports.ids = ["pages/api/incidents"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cincidents%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cincidents%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\incidents\\index.ts */ \"(api)/./src/pages/api/incidents/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/incidents\",\n        pathname: \"/api/incidents\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_incidents_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmluY2lkZW50cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyU1Q3BhZ2VzJTVDYXBpJTVDaW5jaWRlbnRzJTVDaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUU7QUFDbkU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDhEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw4REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFuc3BvcnQtaW5jaWRlbnQtcmVwb3J0ZXIvP2M3ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyY1xcXFxwYWdlc1xcXFxhcGlcXFxcaW5jaWRlbnRzXFxcXGluZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvaW5jaWRlbnRzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvaW5jaWRlbnRzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cincidents%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function hashPassword(password) {\n    const hashedPassword = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_0__.hash)(password, 12);\n    return hashedPassword;\n}\nasync function verifyPassword(password, hashedPassword) {\n    const isValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_0__.compare)(password, hashedPassword);\n    return isValid;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5QztBQUVsQyxlQUFlRSxhQUFhQyxRQUFnQjtJQUNqRCxNQUFNQyxpQkFBaUIsTUFBTUosOENBQUlBLENBQUNHLFVBQVU7SUFDNUMsT0FBT0M7QUFDVDtBQUVPLGVBQWVDLGVBQWVGLFFBQWdCLEVBQUVDLGNBQXNCO0lBQzNFLE1BQU1FLFVBQVUsTUFBTUwsaURBQU9BLENBQUNFLFVBQVVDO0lBQ3hDLE9BQU9FO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFuc3BvcnQtaW5jaWRlbnQtcmVwb3J0ZXIvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoYXNoLCBjb21wYXJlIH0gZnJvbSAnYmNyeXB0anMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBoYXNoKHBhc3N3b3JkLCAxMik7XG4gIHJldHVybiBoYXNoZWRQYXNzd29yZDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2hlZFBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbiAgcmV0dXJuIGlzVmFsaWQ7XG59XG4iXSwibmFtZXMiOlsiaGFzaCIsImNvbXBhcmUiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwidmVyaWZ5UGFzc3dvcmQiLCJpc1ZhbGlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(api)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nif (!process.env.MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nconst uri = process.env.MONGODB_URI;\nlet client;\nlet clientPromise;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    let globalWithMongo = global;\n    if (!globalWithMongo._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri);\n        globalWithMongo._mongoClientPromise = client.connect();\n    }\n    clientPromise = globalWithMongo._mongoClientPromise;\n} else {}\nasync function connectToDatabase() {\n    const client = await clientPromise;\n    const db = client.db();\n    return {\n        client,\n        db\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzQztBQUV0QyxJQUFJLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVyxFQUFFO0lBQzVCLE1BQU0sSUFBSUMsTUFBTTtBQUNsQjtBQUVBLE1BQU1DLE1BQU1KLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVztBQUNuQyxJQUFJRztBQUNKLElBQUlDO0FBRUosSUFBSU4sSUFBeUIsRUFBZTtJQUMxQywrREFBK0Q7SUFDL0QsNkVBQTZFO0lBQzdFLElBQUlPLGtCQUFrQkM7SUFJdEIsSUFBSSxDQUFDRCxnQkFBZ0JFLG1CQUFtQixFQUFFO1FBQ3hDSixTQUFTLElBQUlOLGdEQUFXQSxDQUFDSztRQUN6QkcsZ0JBQWdCRSxtQkFBbUIsR0FBR0osT0FBT0ssT0FBTztJQUN0RDtJQUNBSixnQkFBZ0JDLGdCQUFnQkUsbUJBQW1CO0FBQ3JELE9BQU8sRUFJTjtBQUVNLGVBQWVFO0lBQ3BCLE1BQU1OLFNBQVMsTUFBTUM7SUFDckIsTUFBTU0sS0FBS1AsT0FBT08sRUFBRTtJQUNwQixPQUFPO1FBQUVQO1FBQVFPO0lBQUc7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFuc3BvcnQtaW5jaWRlbnQtcmVwb3J0ZXIvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcblxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJyk7XG59XG5cbmNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xubGV0IGNsaWVudDogTW9uZ29DbGllbnQ7XG5sZXQgY2xpZW50UHJvbWlzZTogUHJvbWlzZTxNb25nb0NsaWVudD47XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcbiAgLy8gaXMgcHJlc2VydmVkIGFjcm9zcyBtb2R1bGUgcmVsb2FkcyBjYXVzZWQgYnkgSE1SIChIb3QgTW9kdWxlIFJlcGxhY2VtZW50KS5cbiAgbGV0IGdsb2JhbFdpdGhNb25nbyA9IGdsb2JhbCBhcyB0eXBlb2YgZ2xvYmFsVGhpcyAmIHtcbiAgICBfbW9uZ29DbGllbnRQcm9taXNlPzogUHJvbWlzZTxNb25nb0NsaWVudD47XG4gIH07XG5cbiAgaWYgKCFnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSkge1xuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmkpO1xuICAgIGdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcbiAgfVxuICBjbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2U7XG59IGVsc2Uge1xuICAvLyBJbiBwcm9kdWN0aW9uIG1vZGUsIGl0J3MgYmVzdCB0byBub3QgdXNlIGEgZ2xvYmFsIHZhcmlhYmxlLlxuICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpKTtcbiAgY2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0VG9EYXRhYmFzZSgpIHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcbiAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcbiAgcmV0dXJuIHsgY2xpZW50LCBkYiB9O1xufVxuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiRXJyb3IiLCJ1cmkiLCJjbGllbnQiLCJjbGllbnRQcm9taXNlIiwiZ2xvYmFsV2l0aE1vbmdvIiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsImNvbm5lY3QiLCJjb25uZWN0VG9EYXRhYmFzZSIsImRiIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/db.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/[...nextauth].ts":
/*!*********************************************!*\
  !*** ./src/pages/api/auth/[...nextauth].ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/auth */ \"(api)/./src/lib/auth.ts\");\n\n\n\n\nconst authOptions = {\n    providers: [\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default()({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    const { db } = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.connectToDatabase)();\n                    const user = await db.collection(\"users\").findOne({\n                        email: credentials.email.toLowerCase()\n                    });\n                    if (!user) {\n                        throw new Error(\"No user found with this email\");\n                    }\n                    const isValid = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.verifyPassword)(credentials.password, user.password);\n                    if (!isValid) {\n                        throw new Error(\"Invalid password\");\n                    }\n                    return {\n                        id: user._id.toString(),\n                        email: user.email,\n                        name: user.name,\n                        userType: user.userType\n                    };\n                } catch (error) {\n                    console.error(\"Authentication error:\", error);\n                    throw error;\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.userType = user.userType;\n                token.name = user.name;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.userType = token.userType;\n                session.user.name = token.name;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/signin\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRDtBQUNZO0FBQ2Q7QUFDRDtBQUU1QyxNQUFNSSxjQUErQjtJQUMxQ0MsV0FBVztRQUNUSixzRUFBbUJBLENBQUM7WUFDbEJLLE1BQU07WUFDTkMsYUFBYTtnQkFDWEMsT0FBTztvQkFBRUMsT0FBTztvQkFBU0MsTUFBTTtnQkFBUTtnQkFDdkNDLFVBQVU7b0JBQUVGLE9BQU87b0JBQVlDLE1BQU07Z0JBQVc7WUFDbEQ7WUFDQSxNQUFNRSxXQUFVTCxXQUFXO2dCQUN6QixJQUFJO29CQUNGLE1BQU0sRUFBRU0sRUFBRSxFQUFFLEdBQUcsTUFBTVgsMERBQWlCQTtvQkFFdEMsTUFBTVksT0FBTyxNQUFNRCxHQUFHRSxVQUFVLENBQUMsU0FBU0MsT0FBTyxDQUFDO3dCQUNoRFIsT0FBT0QsWUFBWUMsS0FBSyxDQUFDUyxXQUFXO29CQUN0QztvQkFFQSxJQUFJLENBQUNILE1BQU07d0JBQ1QsTUFBTSxJQUFJSSxNQUFNO29CQUNsQjtvQkFFQSxNQUFNQyxVQUFVLE1BQU1oQix5REFBY0EsQ0FDbENJLFlBQVlJLFFBQVEsRUFDcEJHLEtBQUtILFFBQVE7b0JBR2YsSUFBSSxDQUFDUSxTQUFTO3dCQUNaLE1BQU0sSUFBSUQsTUFBTTtvQkFDbEI7b0JBRUEsT0FBTzt3QkFDTEUsSUFBSU4sS0FBS08sR0FBRyxDQUFDQyxRQUFRO3dCQUNyQmQsT0FBT00sS0FBS04sS0FBSzt3QkFDakJGLE1BQU1RLEtBQUtSLElBQUk7d0JBQ2ZpQixVQUFVVCxLQUFLUyxRQUFRO29CQUN6QjtnQkFDRixFQUFFLE9BQU9DLE9BQU87b0JBQ2RDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBO29CQUN2QyxNQUFNQTtnQkFDUjtZQUNGO1FBQ0Y7S0FDRDtJQUNERSxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVkLElBQUksRUFBRTtZQUN2QixJQUFJQSxNQUFNO2dCQUNSYyxNQUFNTCxRQUFRLEdBQUdULEtBQUtTLFFBQVE7Z0JBQzlCSyxNQUFNdEIsSUFBSSxHQUFHUSxLQUFLUixJQUFJO1lBQ3hCO1lBQ0EsT0FBT3NCO1FBQ1Q7UUFDQSxNQUFNQyxTQUFRLEVBQUVBLE9BQU8sRUFBRUQsS0FBSyxFQUFFO1lBQzlCLElBQUlBLE9BQU87Z0JBQ1RDLFFBQVFmLElBQUksQ0FBQ1MsUUFBUSxHQUFHSyxNQUFNTCxRQUFRO2dCQUN0Q00sUUFBUWYsSUFBSSxDQUFDUixJQUFJLEdBQUdzQixNQUFNdEIsSUFBSTtZQUNoQztZQUNBLE9BQU91QjtRQUNUO0lBQ0Y7SUFDQUMsT0FBTztRQUNMQyxRQUFRO1FBQ1JQLE9BQU87SUFDVDtJQUNBSyxTQUFTO1FBQ1BHLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztJQUN6QjtJQUNBQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7QUFDckMsRUFBRTtBQUVGLGlFQUFlckMsZ0RBQVFBLENBQUNJLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFuc3BvcnQtaW5jaWRlbnQtcmVwb3J0ZXIvLi9zcmMvcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50cz81MGExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOZXh0QXV0aCwgeyBOZXh0QXV0aE9wdGlvbnMgfSBmcm9tICduZXh0LWF1dGgnO1xuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscyc7XG5pbXBvcnQgeyBjb25uZWN0VG9EYXRhYmFzZSB9IGZyb20gJy4uLy4uLy4uL2xpYi9kYic7XG5pbXBvcnQgeyB2ZXJpZnlQYXNzd29yZCB9IGZyb20gJy4uLy4uLy4uL2xpYi9hdXRoJztcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogJ0NyZWRlbnRpYWxzJyxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiBcIkVtYWlsXCIsIHR5cGU6IFwiZW1haWxcIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgZGIgfSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZmluZE9uZSh7XG4gICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGZvdW5kIHdpdGggdGhpcyBlbWFpbCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxuICAgICAgICAgICAgdXNlci5wYXNzd29yZFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwYXNzd29yZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5faWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgdXNlclR5cGU6IHVzZXIudXNlclR5cGUsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRoZW50aWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSksXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLnVzZXJUeXBlID0gdXNlci51c2VyVHlwZTtcbiAgICAgICAgdG9rZW4ubmFtZSA9IHVzZXIubmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyLnVzZXJUeXBlID0gdG9rZW4udXNlclR5cGU7XG4gICAgICAgIHNlc3Npb24udXNlci5uYW1lID0gdG9rZW4ubmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcbiAgICBlcnJvcjogJy9hdXRoL3NpZ25pbicsXG4gIH0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogJ2p3dCcsXG4gICAgbWF4QWdlOiAzMCAqIDI0ICogNjAgKiA2MCwgLy8gMzAgZGF5c1xuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKGF1dGhPcHRpb25zKTtcbiJdLCJuYW1lcyI6WyJOZXh0QXV0aCIsIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJjb25uZWN0VG9EYXRhYmFzZSIsInZlcmlmeVBhc3N3b3JkIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiZGIiLCJ1c2VyIiwiY29sbGVjdGlvbiIsImZpbmRPbmUiLCJ0b0xvd2VyQ2FzZSIsIkVycm9yIiwiaXNWYWxpZCIsImlkIiwiX2lkIiwidG9TdHJpbmciLCJ1c2VyVHlwZSIsImVycm9yIiwiY29uc29sZSIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwic2Vzc2lvbiIsInBhZ2VzIiwic2lnbkluIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/incidents/index.ts":
/*!******************************************!*\
  !*** ./src/pages/api/incidents/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth/[...nextauth] */ \"(api)/./src/pages/api/auth/[...nextauth].ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nasync function handler(req, res) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.authOptions);\n        if (!session) {\n            return res.status(401).json({\n                message: \"Not authenticated\"\n            });\n        }\n        const { db } = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.connectToDatabase)();\n        // GET request to fetch all incidents\n        if (req.method === \"GET\") {\n            try {\n                const page = parseInt(req.query.page) || 1;\n                const limit = parseInt(req.query.limit) || 10;\n                const search = req.query.search;\n                const skip = (page - 1) * limit;\n                let query = {};\n                if (search) {\n                    query = {\n                        $or: [\n                            {\n                                title: {\n                                    $regex: search,\n                                    $options: \"i\"\n                                }\n                            },\n                            {\n                                \"location.address\": {\n                                    $regex: search,\n                                    $options: \"i\"\n                                }\n                            },\n                            {\n                                type: {\n                                    $regex: search,\n                                    $options: \"i\"\n                                }\n                            },\n                            {\n                                description: {\n                                    $regex: search,\n                                    $options: \"i\"\n                                }\n                            }\n                        ]\n                    };\n                }\n                const [incidents, total] = await Promise.all([\n                    db.collection(\"incidents\").find(query).sort({\n                        createdAt: -1\n                    }).skip(skip).limit(limit).toArray(),\n                    db.collection(\"incidents\").countDocuments(query)\n                ]);\n                return res.status(200).json({\n                    incidents,\n                    total,\n                    page,\n                    totalPages: Math.ceil(total / limit)\n                });\n            } catch (error) {\n                console.error(\"Error fetching incidents:\", error);\n                return res.status(500).json({\n                    message: \"Error fetching incidents\",\n                    error: error.message\n                });\n            }\n        }\n        // POST request to create a new incident\n        if (req.method === \"POST\") {\n            try {\n                console.log(\"Received incident data:\", req.body);\n                console.log(\"Session:\", session);\n                const { title, location, type, severity, description } = req.body;\n                // Validate required fields\n                if (!title || !location || !type || !severity) {\n                    console.error(\"Missing required fields\");\n                    return res.status(400).json({\n                        message: \"Missing required fields\",\n                        receivedData: {\n                            title,\n                            location,\n                            type,\n                            severity\n                        }\n                    });\n                }\n                // Get user details from the database\n                const user = await db.collection(\"users\").findOne({\n                    email: session.user.email\n                });\n                if (!user) {\n                    console.error(\"User not found:\", session.user.email);\n                    return res.status(404).json({\n                        message: \"User not found\"\n                    });\n                }\n                const incident = {\n                    title,\n                    location: {\n                        address: location,\n                        coordinates: null\n                    },\n                    type,\n                    severity,\n                    description: description || \"\",\n                    status: \"pending\",\n                    reportedBy: {\n                        _id: user._id,\n                        name: user.name,\n                        email: user.email\n                    },\n                    comments: [],\n                    createdAt: new Date(),\n                    updatedAt: new Date()\n                };\n                console.log(\"Creating incident:\", incident);\n                const result = await db.collection(\"incidents\").insertOne(incident);\n                console.log(\"Incident created successfully:\", result.insertedId);\n                return res.status(201).json({\n                    message: \"Incident created successfully\",\n                    incident: {\n                        ...incident,\n                        _id: result.insertedId\n                    }\n                });\n            } catch (error) {\n                console.error(\"Error in POST handler:\", error);\n                return res.status(500).json({\n                    message: \"Error creating incident\",\n                    error: error.message\n                });\n            }\n        }\n        // PATCH request to update incident status\n        if (req.method === \"PATCH\") {\n            try {\n                // Only officials can update status\n                if (session.user.userType !== \"official\") {\n                    return res.status(403).json({\n                        message: \"Not authorized to update incident status\"\n                    });\n                }\n                const { id, status } = req.body;\n                if (!id || !status) {\n                    return res.status(400).json({\n                        message: \"Incident ID and status are required\"\n                    });\n                }\n                const validStatuses = [\n                    \"pending\",\n                    \"in_progress\",\n                    \"resolved\",\n                    \"rejected\"\n                ];\n                if (!validStatuses.includes(status)) {\n                    return res.status(400).json({\n                        message: \"Invalid status value\"\n                    });\n                }\n                const result = await db.collection(\"incidents\").updateOne({\n                    _id: new mongodb__WEBPACK_IMPORTED_MODULE_3__.ObjectId(id)\n                }, {\n                    $set: {\n                        status,\n                        updatedAt: new Date(),\n                        updatedBy: {\n                            email: session.user.email,\n                            name: session.user.name\n                        }\n                    }\n                });\n                if (result.matchedCount === 0) {\n                    return res.status(404).json({\n                        message: \"Incident not found\"\n                    });\n                }\n                return res.status(200).json({\n                    message: \"Incident status updated successfully\"\n                });\n            } catch (error) {\n                console.error(\"Error updating incident status:\", error);\n                return res.status(500).json({\n                    message: \"Error updating incident status\",\n                    error: error.message\n                });\n            }\n        }\n        // DELETE request to remove an incident\n        if (req.method === \"DELETE\") {\n            try {\n                const { id } = req.query;\n                if (!id) {\n                    return res.status(400).json({\n                        message: \"Incident ID is required\"\n                    });\n                }\n                // Get the incident to check permissions\n                const incident = await db.collection(\"incidents\").findOne({\n                    _id: new mongodb__WEBPACK_IMPORTED_MODULE_3__.ObjectId(id)\n                });\n                if (!incident) {\n                    return res.status(404).json({\n                        message: \"Incident not found\"\n                    });\n                }\n                // Allow deletion if user is the owner or an official\n                if (incident.reportedBy.email !== session.user.email && session.user.userType !== \"official\") {\n                    return res.status(403).json({\n                        message: \"Not authorized to delete this incident\"\n                    });\n                }\n                // Delete the incident\n                await db.collection(\"incidents\").deleteOne({\n                    _id: new mongodb__WEBPACK_IMPORTED_MODULE_3__.ObjectId(id)\n                });\n                return res.status(200).json({\n                    message: \"Incident deleted successfully\"\n                });\n            } catch (error) {\n                console.error(\"Error deleting incident:\", error);\n                return res.status(500).json({\n                    message: \"Error deleting incident\",\n                    error: error.message\n                });\n            }\n        }\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    } catch (error) {\n        console.error(\"Top level error:\", error);\n        return res.status(500).json({\n            message: \"Server error\",\n            error: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUdrQixVQUFVLENBQUMsYUFBYXVDLFNBQVMsQ0FBQztvQkFDekNoQixLQUFLLElBQUlqRCw2Q0FBUUEsQ0FBQzBEO2dCQUNwQjtnQkFFQSxPQUFPdkQsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsU0FBUztnQkFBZ0M7WUFDekUsRUFBRSxPQUFPNEIsT0FBTztnQkFDZEMsUUFBUUQsS0FBSyxDQUFDLDRCQUE0QkE7Z0JBQzFDLE9BQU9oQyxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQkMsU0FBUztvQkFDVDRCLE9BQU9BLE1BQU01QixPQUFPO2dCQUN0QjtZQUNGO1FBQ0Y7UUFFQSxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBcUI7SUFDOUQsRUFBRSxPQUFPNEIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsb0JBQW9CQTtRQUNsQyxPQUFPaEMsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUNEIsT0FBT0EsTUFBTTVCLE9BQU87UUFDdEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJhbnNwb3J0LWluY2lkZW50LXJlcG9ydGVyLy4vc3JjL3BhZ2VzL2FwaS9pbmNpZGVudHMvaW5kZXgudHM/YWM1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnLi4vYXV0aC9bLi4ubmV4dGF1dGhdJztcbmltcG9ydCB7IGNvbm5lY3RUb0RhdGFiYXNlIH0gZnJvbSAnLi4vLi4vLi4vbGliL2RiJztcbmltcG9ydCB7IE9iamVjdElkIH0gZnJvbSAnbW9uZ29kYic7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcywgYXV0aE9wdGlvbnMpO1xuXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnTm90IGF1dGhlbnRpY2F0ZWQnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGIgfSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XG5cbiAgICAvLyBHRVQgcmVxdWVzdCB0byBmZXRjaCBhbGwgaW5jaWRlbnRzXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UgYXMgc3RyaW5nKSB8fCAxO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCBhcyBzdHJpbmcpIHx8IDEwO1xuICAgICAgICBjb25zdCBzZWFyY2ggPSByZXEucXVlcnkuc2VhcmNoIGFzIHN0cmluZztcbiAgICAgICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgICAgICBsZXQgcXVlcnkgPSB7fTtcbiAgICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICAgIHF1ZXJ5ID0ge1xuICAgICAgICAgICAgJG9yOiBbXG4gICAgICAgICAgICAgIHsgdGl0bGU6IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LFxuICAgICAgICAgICAgICB7ICdsb2NhdGlvbi5hZGRyZXNzJzogeyAkcmVnZXg6IHNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9IH0sXG4gICAgICAgICAgICAgIHsgdHlwZTogeyAkcmVnZXg6IHNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9IH0sXG4gICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IFtpbmNpZGVudHMsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBkYi5jb2xsZWN0aW9uKCdpbmNpZGVudHMnKVxuICAgICAgICAgICAgLmZpbmQocXVlcnkpXG4gICAgICAgICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAgICAgICAgIC5za2lwKHNraXApXG4gICAgICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgICAgICAudG9BcnJheSgpLFxuICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ2luY2lkZW50cycpLmNvdW50RG9jdW1lbnRzKHF1ZXJ5KVxuICAgICAgICBdKTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgIGluY2lkZW50cyxcbiAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICBwYWdlLFxuICAgICAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGluY2lkZW50czonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGZldGNoaW5nIGluY2lkZW50cycsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFBPU1QgcmVxdWVzdCB0byBjcmVhdGUgYSBuZXcgaW5jaWRlbnRcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgaW5jaWRlbnQgZGF0YTonLCByZXEuYm9keSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uOicsIHNlc3Npb24pO1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIHNldmVyaXR5LFxuICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgIGlmICghdGl0bGUgfHwgIWxvY2F0aW9uIHx8ICF0eXBlIHx8ICFzZXZlcml0eSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzJyk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycsXG4gICAgICAgICAgICByZWNlaXZlZERhdGE6IHsgdGl0bGUsIGxvY2F0aW9uLCB0eXBlLCBzZXZlcml0eSB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgdXNlciBkZXRhaWxzIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoe1xuICAgICAgICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVXNlciBub3QgZm91bmQ6Jywgc2Vzc2lvbi51c2VyLmVtYWlsKTtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5jaWRlbnQgPSB7XG4gICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgIGFkZHJlc3M6IGxvY2F0aW9uLFxuICAgICAgICAgICAgY29vcmRpbmF0ZXM6IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIHNldmVyaXR5LFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICByZXBvcnRlZEJ5OiB7XG4gICAgICAgICAgICBfaWQ6IHVzZXIuX2lkLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21tZW50czogW10sXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgaW5jaWRlbnQ6JywgaW5jaWRlbnQpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2luY2lkZW50cycpLmluc2VydE9uZShpbmNpZGVudCk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnSW5jaWRlbnQgY3JlYXRlZCBzdWNjZXNzZnVsbHk6JywgcmVzdWx0Lmluc2VydGVkSWQpO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0luY2lkZW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICBpbmNpZGVudDogeyAuLi5pbmNpZGVudCwgX2lkOiByZXN1bHQuaW5zZXJ0ZWRJZCB9LFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIFBPU1QgaGFuZGxlcjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGNyZWF0aW5nIGluY2lkZW50JyxcbiAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQQVRDSCByZXF1ZXN0IHRvIHVwZGF0ZSBpbmNpZGVudCBzdGF0dXNcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BBVENIJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gT25seSBvZmZpY2lhbHMgY2FuIHVwZGF0ZSBzdGF0dXNcbiAgICAgICAgaWYgKHNlc3Npb24udXNlci51c2VyVHlwZSAhPT0gJ29mZmljaWFsJykge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdOb3QgYXV0aG9yaXplZCB0byB1cGRhdGUgaW5jaWRlbnQgc3RhdHVzJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaWQsIHN0YXR1cyB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgaWYgKCFpZCB8fCAhc3RhdHVzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0luY2lkZW50IElEIGFuZCBzdGF0dXMgYXJlIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZhbGlkU3RhdHVzZXMgPSBbJ3BlbmRpbmcnLCAnaW5fcHJvZ3Jlc3MnLCAncmVzb2x2ZWQnLCAncmVqZWN0ZWQnXTtcbiAgICAgICAgaWYgKCF2YWxpZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBzdGF0dXMgdmFsdWUnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbignaW5jaWRlbnRzJykudXBkYXRlT25lKFxuICAgICAgICAgIHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgJHNldDoge1xuICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEJ5OiB7XG4gICAgICAgICAgICAgICAgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICBuYW1lOiBzZXNzaW9uLnVzZXIubmFtZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChyZXN1bHQubWF0Y2hlZENvdW50ID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0luY2lkZW50IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSW5jaWRlbnQgc3RhdHVzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGluY2lkZW50IHN0YXR1czonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHVwZGF0aW5nIGluY2lkZW50IHN0YXR1cycsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERFTEVURSByZXF1ZXN0IHRvIHJlbW92ZSBhbiBpbmNpZGVudFxuICAgIGlmIChyZXEubWV0aG9kID09PSAnREVMRVRFJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW5jaWRlbnQgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IHRoZSBpbmNpZGVudCB0byBjaGVjayBwZXJtaXNzaW9uc1xuICAgICAgICBjb25zdCBpbmNpZGVudCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2luY2lkZW50cycpLmZpbmRPbmUoe1xuICAgICAgICAgIF9pZDogbmV3IE9iamVjdElkKGlkIGFzIHN0cmluZyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaW5jaWRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnSW5jaWRlbnQgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFsbG93IGRlbGV0aW9uIGlmIHVzZXIgaXMgdGhlIG93bmVyIG9yIGFuIG9mZmljaWFsXG4gICAgICAgIGlmIChpbmNpZGVudC5yZXBvcnRlZEJ5LmVtYWlsICE9PSBzZXNzaW9uLnVzZXIuZW1haWwgJiYgc2Vzc2lvbi51c2VyLnVzZXJUeXBlICE9PSAnb2ZmaWNpYWwnKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ05vdCBhdXRob3JpemVkIHRvIGRlbGV0ZSB0aGlzIGluY2lkZW50JyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgaW5jaWRlbnRcbiAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbignaW5jaWRlbnRzJykuZGVsZXRlT25lKHtcbiAgICAgICAgICBfaWQ6IG5ldyBPYmplY3RJZChpZCBhcyBzdHJpbmcpLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSW5jaWRlbnQgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgaW5jaWRlbnQ6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBkZWxldGluZyBpbmNpZGVudCcsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1RvcCBsZXZlbCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdTZXJ2ZXIgZXJyb3InLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsImNvbm5lY3RUb0RhdGFiYXNlIiwiT2JqZWN0SWQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2Vzc2lvbiIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZGIiLCJtZXRob2QiLCJwYWdlIiwicGFyc2VJbnQiLCJxdWVyeSIsImxpbWl0Iiwic2VhcmNoIiwic2tpcCIsIiRvciIsInRpdGxlIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJpbmNpZGVudHMiLCJ0b3RhbCIsIlByb21pc2UiLCJhbGwiLCJjb2xsZWN0aW9uIiwiZmluZCIsInNvcnQiLCJjcmVhdGVkQXQiLCJ0b0FycmF5IiwiY291bnREb2N1bWVudHMiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwibG9jYXRpb24iLCJzZXZlcml0eSIsInJlY2VpdmVkRGF0YSIsInVzZXIiLCJmaW5kT25lIiwiZW1haWwiLCJpbmNpZGVudCIsImFkZHJlc3MiLCJjb29yZGluYXRlcyIsInJlcG9ydGVkQnkiLCJfaWQiLCJuYW1lIiwiY29tbWVudHMiLCJEYXRlIiwidXBkYXRlZEF0IiwicmVzdWx0IiwiaW5zZXJ0T25lIiwiaW5zZXJ0ZWRJZCIsInVzZXJUeXBlIiwiaWQiLCJ2YWxpZFN0YXR1c2VzIiwiaW5jbHVkZXMiLCJ1cGRhdGVPbmUiLCIkc2V0IiwidXBkYXRlZEJ5IiwibWF0Y2hlZENvdW50IiwiZGVsZXRlT25lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/incidents/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cincidents%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();